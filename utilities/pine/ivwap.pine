//@version=5
indicator("IVWAP Context (Non-Strategy)", overlay=true)

// -----------------------------------------------------------------------------
// Auxiliary Execution Utility
//
// Context ONLY:
// - Session-based IVWAP
// - No signals, no entries, no exits, no alerts
// - Used by external systems (V7 Grammar System)
// -----------------------------------------------------------------------------

// Reset per session (daily)
isNewSession = ta.change(time("D"))

var float cumPV = na
var float cumV  = na

if isNewSession
    cumPV := 0.0
    cumV  := 0.0

cumPV += hlc3 * volume
cumV  += volume

ivwap = cumV > 0 ? cumPV / cumV : na

// Visualization (context only)
plot(ivwap, title="IVWAP", color=color.orange, linewidth=2)
